"""
Usage:

1. Compile pyx file to c code

python setup.py build_ext --inplace

2. Run

python explore_exploit.py

To Edit:
Edit the pyx file (or this file) and make sure to recompile the c code


Latest data:
[51, 101, 151, 151, 201, 201, 251, 251, 301, 301, 351, 301, 351, 301, 401, 401, 451, 451, 451, 501, 501, 551, 551, 551, 551, 601, 601, 601, 601, 551, 651, 601, 651, 751, 701, 651, 701, 751, 801, 751, 701, 701, 751, 801, 851, 851, 801, 801, 951, 801, 951, 851, 901, 851, 1001, 1001, 1001, 901, 1051, 951, 1051, 1051, 951, 1151, 1051, 1051, 1101, 1101, 1051, 1101, 1151, 1101, 1001, 1201, 1001, 1151, 1201, 1151, 1251, 1201, 1101, 1301, 1101, 1201, 1201, 1151, 1051, 1151, 1251, 1401, 1351, 1251, 1351, 1251, 1351, 1301, 1301, 1451, 1401]
"""

import random
import matplotlib.pyplot as plt
import numpy as np
import explore_exploit_cython as e
from matplotlib import rc
rc('text', usetex=True)

# possible values for t to test
ts = np.arange(0,10000,100)
#qs = e.get_q_for_ts(ts[1:])
qs = [51, 101, 151, 151, 201, 201, 251, 251, 301, 301, 351, 301, 351, 301, 401,
401, 451, 451, 451, 501, 501, 551, 551, 551, 551, 601, 601, 601, 601, 551, 651,
601, 651, 751, 701, 651, 701, 751, 801, 751, 701, 701, 751, 801, 851, 851, 801,
801, 951, 801, 951, 851, 901, 851, 1001, 1001, 1001, 901, 1051, 951, 1051, 1051,
951, 1151, 1051, 1051, 1101, 1101, 1051, 1101, 1151, 1101, 1001, 1201, 1001,
1151, 1201, 1151, 1251, 1201, 1101, 1301, 1101, 1201, 1201, 1151, 1051, 1151,
1251, 1401, 1351, 1251, 1351, 1251, 1351, 1301, 1301, 1451, 1401]
# print(qs)

fig,ax = plt.subplots()
ax.scatter(ts[1:],qs,label="Empirically Calculated Optimal Q value")
ax.plot(ts[1:], [3*t**(2/3) for t in ts[1:]],label=r"\theta(n^(2/3))",color='r')
ax.set_title('Optimal Q as a function of T')
ax.set_xlabel('Number of Pulls Allowed (T)')
ax.set_ylabel('Optimal Number of Exploration Pulls (Q/2)')
plt.legend()
plt.show()
